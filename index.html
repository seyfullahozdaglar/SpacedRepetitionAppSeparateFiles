<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Vocabulary Flashcards</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Note Modal -->
    <div id="noteModal" class="note-modal">
        <div class="note-modal-content">
            <h3 id="noteModalTitle">Add Note</h3>
            <textarea id="noteInput" placeholder="Enter your note here..."></textarea>
            <div class="note-modal-actions">
                <button id="cancelNoteBtn">Cancel</button>
                <button id="saveNoteBtn" class="success">Save Note</button>
            </div>
        </div>
    </div>

    <!-- Edit Word Modal -->
    <div id="editWordModal" class="note-modal">
        <div class="note-modal-content">
            <h3 id="editWordModalTitle">Edit Card</h3>
            <div class="form-group">
                <label for="editWordInput">Word:</label>
                <input type="text" id="editWordInput" placeholder="Enter word">
            </div>
            <div class="form-group">
                <label for="editMeaningInput">Meaning:</label>
                <input type="text" id="editMeaningInput" placeholder="Enter meaning">
            </div>
            <div class="form-group">
                <label for="editGenderInput">Gender (Optional):</label>
                <select id="editGenderInput">
                    <option value="">No Gender</option>
                    <option value="masculine">Masculine</option>
                    <option value="feminine">Feminine</option>
                    <option value="neutral">Neutral</option>
                </select>
            </div>
            <div class="note-modal-actions">
                <button id="cancelEditWordBtn">Cancel</button>
                <button id="saveEditWordBtn" class="success">Save</button>
            </div>
        </div>
    </div>

    <!-- Side navigation (lists + create list) -->
    <div id="sideNav" class="side-nav" aria-hidden="true">
        <h2>Your Lists</h2>
        <div class="lists-inner">
            <div id="listsContainer" class="control-group"></div>
        </div>
        <div class="control-group" style="margin-top:12px;">
            <input type="text" id="newListName" placeholder="New list name">
            <button id="createListBtn">Create New List</button>
        </div>
    </div>

    <!-- overlay -->
    <div id="overlay" class="screen-overlay" tabindex="-1"></div>

    <div class="container">
        <header>
            <div style="display:flex; align-items:center; gap:12px;">
                <button id="burgerBtn" aria-label="Open lists menu">‚ò∞</button>
                <div>
                    <h1>Vocabulary Flashcards</h1>
                    <p>Learn and practice vocabulary with spaced repetition</p>
                </div>
            </div>
            <div class="control-group" style="gap:8px;">
                <label for="languageSelect">Language:</label>
                <select id="languageSelect">
                    <option value="en">English</option>
                    <option value="pl">Polish</option>
                    <option value="tr">Turkish</option>
                </select>
                <button id="nightModeToggle" title="Toggle night mode">üåô</button>
            </div>
        </header>

        <!-- Dashboard View -->
        <div id="dashboardView" class="view active">
            <div class="stats-container">
                <div class="stat-box">
                    <div class="stat-label">Total Cards</div>
                    <div id="totalCards" class="stat-number">0</div>
                </div>
                <div class="stat-box">
                    <div class="stat-label">Ready to Practice</div>
                    <div id="readyToPractice" class="stat-number">0</div>
                </div>
                <div class="stat-box">
                    <div class="stat-label">Never Practiced</div>
                    <div id="neverPracticed" class="stat-number">0</div>
                </div>
                <div class="stat-box">
                    <div class="stat-label">Known Words</div>
                    <div id="knownWords" class="stat-number">0</div>
                </div>
            </div>

            <div class="controls">
                <div class="control-group">
                    <label for="batchSize">Batch Size:</label>
                    <select id="batchSize">
                        <option value="5">5 cards</option>
                        <option value="10" selected>10 cards</option>
                        <option value="15">15 cards</option>
                        <option value="20">20 cards</option>
                    </select>

                    <label for="direction">Direction:</label>
                    <select id="direction">
                        <option value="wordToMeaning">Word ‚Üí Meaning</option>
                        <option value="meaningToWord">Meaning ‚Üí Word</option>
                    </select>
                </div>

                <div class="control-group">
                    <button id="learnNewBtn">Learn New Words</button>
                    <button id="practiceLearnedBtn">Practice Learned Words</button>
                    <button id="viewStatsBtn">View Statistics</button>
                </div>

                <div class="control-group">
                    <button id="importBtn">Import Cards</button>
                    <button id="exportMetadataBtn">Export Metadata</button>
                    <button id="importMetadataBtn">Import Metadata</button>
                    <button id="wipeAllBtn" class="danger">Wipe All Data</button>
                </div>
            </div>
        </div>

        <!-- Practice View -->
        <div id="practiceView" class="view">
            <div class="progress" id="progressText">Question 1 of 10</div>
            <div class="card">
                <div class="question" id="questionWrapper">
                    <div id="questionText"></div>
                    <button id="playAudioBtn" class="icon-btn" title="Play pronunciation" style="display:none;">üîä Play</button>
                </div>

                <div id="genderDisplay" class="gender-display" style="display: none;"></div>

                <div id="noteDisplay" class="note-display" style="display: none;"></div>

                <div id="firstTimeHint" class="note-display" style="display: none; font-weight:600;"></div>

                <div class="options" id="optionsContainer"></div>

                <div class="card-actions" id="cardActions" style="display: none;">
                    <button id="markKnownBtn" class="success">Mark as Known</button>
                    <button id="editWordBtn">Edit Word</button>
                    <button id="editNoteBtn">Add Note</button>
                    <button id="recordAudioBtn" class="icon-btn" title="Record pronunciation">üéôÔ∏è Record</button>
                    <button id="deleteCardBtn" class="danger">Delete Card</button>
                </div>
            </div>
            <div class="feedback" id="feedback" style="display: none;"></div>
            <button id="backToDashboardBtn" style="margin-top: 20px;">Back to Dashboard</button>
        </div>

        <!-- Summary View -->
        <div id="summaryView" class="view">
            <div class="summary">
                <h2 id="summaryTitle">Session Summary</h2>
                <p id="summaryText"></p>
                <button id="summaryBtn">Back to Dashboard</button>
            </div>
        </div>

        <!-- Statistics View -->
        <div id="statsView" class="view">
            <button id="backFromStatsBtn" style="margin-bottom: 20px;">Back to Dashboard</button>
            <h2>Card Statistics</h2>
            <div class="control-group">
                <button id="availableNowFilter" class="filter-btn active">Available Now</button>
                <button id="neverPracticedFilter" class="filter-btn">Never Practiced</button>
                <button id="knownWordsFilter" class="filter-btn">Known Words</button>
                <button id="allCardsFilter" class="filter-btn">All Cards</button>
            </div>
            <table id="statsTable">
                <thead>
                    <tr>
                        <th data-sort="word" data-sort-direction="none">Word</th>
                        <th data-sort="meaning" data-sort-direction="none">Meaning</th>
                        <th data-sort="gender" data-sort-direction="none">Gender</th>
                        <th data-sort="note" data-sort-direction="none">Note</th>
                        <th data-sort="practiced" data-sort-direction="none">Practiced</th>
                        <th data-sort="successRate" data-sort-direction="none">Success Rate</th>
                        <th data-sort="nextDueAt" data-sort-direction="none">Next Due</th>
                        <th data-sort="known" data-sort-direction="none">Known</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody id="statsTableBody"></tbody>
            </table>
        </div>

        <!-- Import View -->
        <div id="importView" class="view">
            <h2>Import Cards</h2>

            <div class="single-add-form">
                <h3>Add Single Card</h3>
                <div class="form-group">
                    <label for="wordInput">Word:</label>
                    <input type="text" id="wordInput" placeholder="Enter word">
                </div>
                <div class="form-group">
                    <label for="meaningInput">Meaning:</label>
                    <input type="text" id="meaningInput" placeholder="Enter meaning">
                </div>
                <div class="form-group">
                    <label for="genderInputImport">Gender (Optional):</label>
                    <select id="genderInputImport">
                        <option value="">No Gender</option>
                        <option value="masculine">Masculine</option>
                        <option value="feminine">Feminine</option>
                        <option value="neutral">Neutral</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="noteInputImport">Note (Optional):</label>
                    <input type="text" id="noteInputImport" placeholder="Enter note">
                </div>
                <div class="form-group">
                    <label for="imageInputImport">Image URL (Optional):</label>
                    <input type="text" id="imageInputImport" placeholder="https://example.com/pic.jpg">
                </div>
                <button id="addSingleCardBtn">Add Card</button>
            </div>

            <div class="import-section">
                <h3>Bulk Import</h3>
                <p>Import cards from a text file with format: <code>word // meaning // gender // note // imageUrl</code> on each line (gender, note and imageUrl are optional). Example: <code>apple // jab≈Çko // neutral // A red fruit // https://example.com/apple.jpg</code></p>
                <input type="file" id="fileInput" accept=".txt,.csv,text/plain,text/csv,application/vnd.ms-excel,application/octet-stream">
                <button id="processImportBtn" style="margin-top: 15px;">Process Import</button>

                <hr style="margin:20px 0;border:none;border-top:1px solid var(--border-color)">

                <p>Or paste pairs directly (one per line, format: <code>word // meaning // gender // note // imageUrl</code>)</p>
                <textarea id="pasteInput" placeholder="e.g. apple // jab≈Çko // neutral // A red fruit // https://example.com/apple.jpg"></textarea>
                <div style="margin-top:12px;">
                    <button id="processPasteBtn">Import Pasted</button>
                </div>
            </div>
            <div id="importResult" style="margin-top: 20px;"></div>
            <button id="backFromImportBtn" style="margin-top: 20px;">Back to Dashboard</button>
        </div>
    </div>

    <input type="file" id="metadataFileInput" accept=".csv,text/csv,application/csv,application/vnd.ms-excel,text/plain,application/octet-stream" style="position:absolute; left:-9999px; width:1px; height:1px; overflow:hidden;" aria-hidden="true">

    <script src="script.js"></script>
</body>
</html>